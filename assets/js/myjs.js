document.addEventListener("DOMContentLoaded",function(){const items=document.querySelectorAll('.accordion-item');items.forEach(item=>{const header=item.querySelector('.accordion-header');const content=item.querySelector('.accordion-content');const icon=header.querySelector('.icon');header.addEventListener('click',function(){document.querySelectorAll('.accordion-item').forEach(otherItem=>{if(otherItem!==item){otherItem.classList.remove('active');otherItem.querySelector('.accordion-content').style.maxHeight="0";otherItem.querySelector('.icon').textContent="+";otherItem.querySelector('.accordion-header').style.pointerEvents="auto"}});if(item.classList.contains('active')){item.classList.remove('active');content.style.maxHeight="0";icon.textContent="+";header.style.pointerEvents="auto"}else{item.classList.add('active');content.style.maxHeight=content.scrollHeight+"px";icon.textContent="-";header.style.pointerEvents="none"}})});const firstItem=document.querySelector('.accordion-item.active');if(firstItem){firstItem.querySelector('.accordion-content').style.maxHeight=firstItem.querySelector('.accordion-content').scrollHeight+"px";firstItem.querySelector('.icon').textContent="-"}});function openPopup(){document.getElementById("popup").style.display="block";document.getElementById("overlay").style.display="block";let videoContainer=document.getElementById("videoContainer");let iframe=document.createElement("iframe");let videoSrc=window.innerWidth<=768?"https://www.youtube.com/embed/u-dka-MtPsE":"https://www.youtube.com/embed/24pwzg-Ps1k";iframe.id="popupVideo";iframe.width="640";iframe.height="360";iframe.loading="lazy";iframe.src=videoSrc;iframe.title="Skymed Essentials Travel Protection";iframe.frameBorder="0";iframe.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share";iframe.referrerPolicy="strict-origin-when-cross-origin";iframe.allowFullscreen=!0;videoContainer.innerHTML="";videoContainer.appendChild(iframe)}
function closePopup(){document.getElementById("popup").style.display="none";document.getElementById("overlay").style.display="none";document.getElementById("videoContainer").innerHTML=""}
const currentYear=new Date().getFullYear();document.getElementById('current-year').textContent=currentYear;function getTomorrowDate(){const today=new Date();today.setDate(today.getDate()+1);const year=today.getFullYear();const month=String(today.getMonth()+1).padStart(2,'0');const day=String(today.getDate()).padStart(2,'0');return `${year}-${month}-${day}`}
document.getElementById("coverageStart").setAttribute("min",getTomorrowDate());document.getElementById("coverageEnd").setAttribute("min",getTomorrowDate());function openPdfPopup(){document.getElementById("pdfPopup").style.display="block";document.getElementById("overlaypopup").style.display="block"}
function closePdfPopup(){document.getElementById("pdfPopup").style.display="none";document.getElementById("overlaypopup").style.display="none"}
document.addEventListener('DOMContentLoaded',function(){const lazyLoadElements=document.querySelectorAll('.lazy-load');const observer=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const element=entry.target;const bgUrl=element.getAttribute('data-bg');element.style.backgroundImage=`url(${bgUrl})`;element.classList.remove('lazy-load');observer.unobserve(element)}})},{threshold:0.1});lazyLoadElements.forEach(element=>{observer.observe(element)})});document.getElementById("emailForm").onsubmit=function(event){event.preventDefault();var form=this;var formData=new FormData(form);fetch(form.action,{method:"POST",body:formData}).then(response=>response.text()).then(data=>{if(data.trim()==="success"){document.getElementById("responseMessage").style.display="block";form.reset()}else{alert("Failed to send email. Please try again.")}}).catch(error=>console.error("Error:",error))}